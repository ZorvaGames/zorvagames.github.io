<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZorvaGames - Ultimate Platform</title>
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://images.unsplash.com; frame-src 'self';">
    <meta name="google-site-verification" content="CZ4HB0wl83PJNnk7KpUVhwCcmTqqy8CaMxF-EO0qCQA" />

    <style>
        :root {
            --primary: #6c5ce7;
            --dark: #0f0f0f;
            --panel: #181818;
            --gold: #ffd700;   /* Owner */
            --orange: #ff9f43; /* Commander */
            --green: #2ecc71;  /* Mod */
            --dev: #00d2d3;    /* Developer */
            --red: #ff4757;    /* Alert */
        }

        body {
            margin: 0;
            background-color: var(--dark);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px;
            background-color: var(--panel);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #222;
        }

        .logo { font-size: 24px; font-weight: 900; padding: 20px; color: white; cursor: pointer; text-transform: uppercase; }
        .logo span { color: var(--primary); }

        /* CHAT TABS IN SIDEBAR */
        .chat-tabs { display: flex; background: #000; border-bottom: 1px solid #333; }
        .tab { flex: 1; padding: 10px; text-align: center; cursor: pointer; font-size: 11px; font-weight: bold; color: #666; }
        .tab.active { color: white; border-bottom: 2px solid var(--primary); }
        .tab.staff-only { color: var(--gold); display: none; } /* Hidden for users */

        .chat-window { flex: 1; padding: 15px; overflow-y: auto; font-size: 13px; display: none; }
        .chat-window.active { display: block; }
        .chat-msg { margin-bottom: 8px; line-height: 1.4; border-bottom: 1px solid #222; padding-bottom: 4px; }

        /* --- MAIN AREA --- */
        .main-content { flex: 1; display: flex; flex-direction: column; overflow-y: auto; }

        .top-nav {
            height: 60px; background: var(--panel); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; border-bottom: 1px solid #222;
        }
        .search-bar { background: #000; border: 1px solid #333; padding: 8px 15px; border-radius: 20px; color: white; width: 250px; }

        /* BUTTONS */
        .btn { padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: bold; border: none; font-size:12px; transition:0.2s; }
        .btn-login { background-color: var(--primary); color: white; }
        .btn-logout { background-color: var(--red); color: white; display: none; margin-left: 10px; }
        .btn-staff { background-color: var(--gold); color: black; display: none; }
        .btn-dev { background-color: var(--dev); color: black; display: none; }
        .btn-kick { background-color: var(--red); color: white; padding: 2px 6px; font-size: 10px; margin-left: 10px; display: none; }

        /* VIEWS */
        .portal-view { padding: 30px; }
        .admin-view { display: none; padding: 30px; background: #111; height: 100%; }

        /* DASHBOARD GRID */
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .panel-box { background: #222; padding: 20px; border-radius: 10px; border: 1px solid #444; }
        .lvl1-box { border-color: var(--gold); display: none; } /* Owner Only */

        /* STAFF LIST */
        .staff-row { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #333; }

        /* MODALS */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 999; }
        .modal-content { background: var(--panel); padding: 30px; border-radius: 10px; width: 350px; text-align: center; border: 1px solid #555; }
        .modal-input { width: 90%; padding: 10px; margin: 10px 0; background: #000; border: 1px solid #444; color: white; border-radius: 5px; }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo" onclick="goHome()">ZORVA<span>GAMES</span></div>
        
        <div class="chat-tabs">
            <div class="tab active" onclick="switchChat('global')">Global üì¢</div>
            <div class="tab staff-only" id="staffTab" onclick="switchChat('staff')">Staff üîí</div>
        </div>

        <div class="chat-window active" id="globalChat">
            <div class="chat-msg"><span style="color:#666;">System:</span> Welcome to ZorvaGames.</div>
            <div class="chat-msg" id="defaultMsg"><span style="color:var(--gold);">Admin:</span> Recruitment is OPEN!</div>
        </div>

        <div class="chat-window" id="staffChat">
            <div class="chat-msg"><span style="color:#666;">System:</span> Channel Encrypted.</div>
        </div>

        <div style="padding:10px; border-top:1px solid #333; display:none;" id="chatInputArea">
            <input type="text" id="chatInput" placeholder="Broadcast..." style="width:90%; background:#000; border:1px solid #333; color:white; padding:5px;" onkeypress="sendChat(event)">
        </div>
    </div>

    <div class="main-content">
        <div class="top-nav">
            <input type="text" class="search-bar" placeholder="Search games...">
            
            <div style="display: flex; align-items: center; gap: 10px;">
                <button class="btn btn-dev" id="uploadBtn" onclick="openModal('uploadModal')">‚¨Ü Upload</button>
                <button class="btn btn-staff" id="staffBtn" onclick="toggleAdminView()">‚öôÔ∏è Gov Panel</button>
                
                <button class="btn btn-login" id="loginBtn" onclick="openModal('loginModal')">Login</button>
                <span id="userInfo" style="display:none; font-weight:bold; margin: 0 10px;">Guest</span>
                <button class="btn btn-logout" id="logoutBtn" onclick="logout()">Logout</button>
            </div>
        </div>

        <div class="portal-view" id="portalView">
            <div style="width:100%; height:400px; background:black; border-radius:12px; position:relative; border:1px solid #333; display:flex; align-items:center; justify-content:center;">
                <h1 style="color:white;">TANK DUEL GAME FRAME</h1>
            </div>
            <h2>Trending Games</h2>
            <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap:20px;">
                <div style="background:#222; height:100px; border-radius:10px;"></div>
                <div style="background:#222; height:100px; border-radius:10px;"></div>
                <div style="background:#222; height:100px; border-radius:10px;"></div>
            </div>
        </div>

        <div class="admin-view" id="adminView">
            <h1 style="color: var(--gold);">üèõÔ∏è Government Control</h1>
            
            <div class="dash-grid">
                <div class="panel-box lvl1-box" id="inboxPanel">
                    <h3 style="color:var(--gold); margin-top:0;">üì® Kick Requests</h3>
                    <div id="requestList" style="color:#888;">No pending requests.</div>
                </div>

                <div class="panel-box lvl1-box" id="codePanel">
                    <h3 style="color:var(--gold); margin-top:0;">üîë Nuclear Codes</h3>
                    <button class="btn" style="background:var(--gold); color:black;" onclick="genCode()">Generate Code</button>
                    <span id="codeDisplay" style="font-family:monospace; margin-left:10px; font-size:18px;"></span>
                </div>

                <div class="panel-box" style="grid-column: span 2;">
                    <h3>Active Staff & Users</h3>
                    <div class="staff-row">
                        <span><b style="color:var(--gold)">üëë OWNER</b> (You)</span>
                    </div>
                    <div class="staff-row">
                        <span><b style="color:var(--orange)">‚öîÔ∏è Commander</b> (Lvl 2)</span>
                        <button class="btn-kick" onclick="tryKick('admin', 'Commander')">KICK</button>
                    </div>
                    <div class="staff-row">
                        <span><b style="color:var(--green)">üõ°Ô∏è Moderator</b> (Lvl 3)</span>
                        <button class="btn-kick" onclick="tryKick('admin', 'Moderator')">KICK</button>
                    </div>
                    <div class="staff-row">
                        <span>üë§ BadUser123</span>
                        <button class="btn-kick" onclick="tryKick('user', 'BadUser123')">KICK</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2>System Login</h2>
            <p style="color:#aaa; font-size:10px;">owner/zorva | commander/1234 | mod/1234 | dev/1234</p>
            <input type="text" id="uName" class="modal-input" placeholder="User">
            <input type="password" id="pWord" class="modal-input" placeholder="Pass">
            <button class="btn btn-login" onclick="login()">Enter</button>
            <button class="btn" onclick="closeModal('loginModal')" style="background:none; color:#777;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <h2 style="color: var(--dev);">Dev Upload</h2>
            <input type="file" class="modal-input">
            <button class="btn btn-dev" onclick="alert('Sent!'); closeModal('uploadModal')">Submit</button>
            <button class="btn" onclick="closeModal('uploadModal')" style="background:none; color:#777;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="kickChoiceModal">
        <div class="modal-content">
            <h2 style="color:var(--red)">‚ö†Ô∏è Admin Kick</h2>
            <p>Authorization Required.</p>
            <div style="display:flex; gap:10px; justify-content:center;">
                <button class="btn" style="background:var(--primary); color:white;" onclick="openModal('codeModal'); closeModal('kickChoiceModal')">Use Code</button>
                <button class="btn" style="background:var(--orange); color:black;" onclick="openModal('permModal'); closeModal('kickChoiceModal')">Ask Permission</button>
            </div>
            <br>
            <button class="btn" onclick="closeModal('kickChoiceModal')" style="background:none; color:#777;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="codeModal">
        <div class="modal-content">
            <h3>Enter Code</h3>
            <input type="text" id="kickCode" class="modal-input" placeholder="XXXX">
            <button class="btn" style="background:var(--primary); color:white;" onclick="runCodeKick()">Authorize</button>
            <button class="btn" onclick="closeModal('codeModal')" style="background:none; color:#777;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="permModal">
        <div class="modal-content">
            <h3>Request Permission</h3>
            <input type="text" id="kickReason" class="modal-input" placeholder="Reason...">
            <button class="btn" style="background:var(--orange); color:black;" onclick="runPermRequest()">Send</button>
            <button class="btn" onclick="closeModal('permModal')" style="background:none; color:#777;">Cancel</button>
        </div>
    </div>

    <script>
        // GLOBAL VARIABLES
        let myRole = 'guest'; // owner, commander, mod, dev, user
        let myName = 'Guest';
        let activeTarget = '';
        let validCode = ''; 
        let requests = [];

        // 1. SESSION MANAGEMENT (Persistent Login)
        window.onload = function() {
            if(localStorage.getItem('zorvaUser')) {
                myName = localStorage.getItem('zorvaUser');
                myRole = localStorage.getItem('zorvaRole');
                updateUI();
            }
        };

        function login() {
            const u = document.getElementById('uName').value;
            const p = document.getElementById('pWord').value;

            if (u === 'owner' && p === 'zorva') { myRole = 'owner'; }
            else if (u === 'commander' && p === '1234') { myRole = 'commander'; }
            else if (u === 'mod' && p === '1234') { myRole = 'mod'; }
            else if (u === 'dev' && p === '1234') { myRole = 'dev'; }
            else { myRole = 'user'; }

            myName = u;
            localStorage.setItem('zorvaUser', myName);
            localStorage.setItem('zorvaRole', myRole);
            
            updateUI();
            closeModal('loginModal');
        }

        function logout() {
            localStorage.clear();
            location.reload();
        }

        function updateUI() {
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'block';
            const info = document.getElementById('userInfo');
            info.style.display = 'block';

            // Reset Buttons
            document.getElementById('staffBtn').style.display = 'none';
            document.getElementById('uploadBtn').style.display = 'none';
            document.getElementById('staffTab').style.display = 'none';
            document.getElementById('chatInputArea').style.display = 'none';
            document.querySelectorAll('.btn-kick').forEach(b => b.style.display = 'none');
            document.querySelectorAll('.lvl1-box').forEach(b => b.style.display = 'none');

            // Apply Powers
            if (myRole === 'owner') {
                info.innerHTML = `<span style="color:var(--gold)">üëë ${myName}</span>`;
                document.getElementById('staffBtn').style.display = 'block';
                document.getElementById('staffTab').style.display = 'block';
                document.getElementById('chatInputArea').style.display = 'block';
                document.querySelectorAll('.btn-kick').forEach(b => b.style.display = 'block');
                document.querySelectorAll('.lvl1-box').forEach(b => b.style.display = 'block');
                renderInbox();
            }
            else if (myRole === 'commander') {
                info.innerHTML = `<span style="color:var(--orange)">‚öîÔ∏è ${myName}</span>`;
                document.getElementById('staffBtn').style.display = 'block';
                document.getElementById('staffTab').style.display = 'block';
                document.getElementById('chatInputArea').style.display = 'block';
                document.querySelectorAll('.btn-kick').forEach(b => b.style.display = 'block');
            }
            else if (myRole === 'mod') {
                info.innerHTML = `<span style="color:var(--green)">üõ°Ô∏è ${myName}</span>`;
                document.getElementById('staffBtn').style.display = 'block';
                document.getElementById('staffTab').style.display = 'block';
                document.getElementById('chatInputArea').style.display = 'block';
                document.querySelectorAll('.btn-kick').forEach(b => b.style.display = 'block');
            }
            else if (myRole === 'dev') {
                info.innerHTML = `<span style="color:var(--dev)">üõ†Ô∏è ${myName}</span>`;
                document.getElementById('uploadBtn').style.display = 'block';
            }
            else {
                info.innerText = myName;
            }
        }

        // 2. KICK SYSTEM (The Government Logic)
        function tryKick(type, name) {
            activeTarget = name;
            // Kick User = Easy
            if (type === 'user') {
                if(confirm("Kick user?")) alert(name + " kicked!");
                return;
            }
            // Kick Admin = Hard
            if (myRole === 'owner') {
                alert("OWNER OVERRIDE: " + name + " kicked.");
            } else {
                openModal('kickChoiceModal');
            }
        }

        function genCode() {
            validCode = "ZOR-" + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('codeDisplay').innerText = validCode;
        }

        function runCodeKick() {
            if (document.getElementById('kickCode').value === validCode && validCode !== '') {
                alert("‚úÖ Code Valid. " + activeTarget + " kicked.");
                validCode = ''; // Burn code
                closeModal('codeModal');
            } else {
                alert("‚ùå Invalid Code");
            }
        }

        function runPermRequest() {
            const r = document.getElementById('kickReason').value;
            requests.push({ from: myRole, target: activeTarget, reason: r });
            alert("üì® Request Sent to Owner Inbox");
            closeModal('permModal');
            renderInbox(); // Simulate update
        }

        function renderInbox() {
            if (myRole !== 'owner') return;
            const list = document.getElementById('requestList');
            if(requests.length === 0) { list.innerText = "No pending requests."; return; }
            
            list.innerHTML = '';
            requests.forEach((req, i) => {
                list.innerHTML += `<div style="border-left:2px solid var(--red); padding-left:5px; margin-bottom:5px;">
                    <div style="font-size:11px; color:#aaa;">From: ${req.from}</div>
                    <div>Kick <b>${req.target}</b>?</div>
                    <button class="btn" style="padding:2px 5px; font-size:10px; background:var(--green); color:black;" onclick="alert('Approved'); requests.splice(${i},1); renderInbox();">YES</button>
                    <button class="btn" style="padding:2px 5px; font-size:10px; background:var(--red); color:white;" onclick="requests.splice(${i},1); renderInbox();">NO</button>
                </div>`;
            });
        }

        // 3. CHAT SYSTEM
        let activeChat = 'global';
        function switchChat(c) {
            activeChat = c;
            document.querySelectorAll('.chat-window').forEach(w => w.style.display = 'none');
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(c + 'Chat').style.display = 'block';
            
            if(c === 'global') document.querySelectorAll('.tab')[0].classList.add('active');
            else document.getElementById('staffTab').classList.add('active');
        }

        function sendChat(e) {
            if (e.key === 'Enter') {
                const txt = document.getElementById('chatInput').value;
                const box = document.getElementById(activeChat + 'Chat');
                
                let color = 'white';
                if(myRole === 'owner') color = 'var(--gold)';
                if(myRole === 'commander') color = 'var(--orange)';
                if(myRole === 'mod') color = 'var(--green)';

                const msg = document.createElement('div');
                msg.className = 'chat-msg';
                msg.innerHTML = `<span style="color:${color}; font-weight:bold;">${myRole.toUpperCase()}:</span> ${txt}`;
                box.appendChild(msg);
                document.getElementById('chatInput').value = '';
            }
        }

        // 4. VIEW SWITCHING
        function toggleAdminView() {
            const p = document.getElementById('portalView');
            const a = document.getElementById('adminView');
            if(p.style.display === 'none') { p.style.display='block'; a.style.display='none'; }
            else { p.style.display='none'; a.style.display='block'; }
        }
        function goHome() {
            document.getElementById('portalView').style.display='block';
            document.getElementById('adminView').style.display='none';
        }
        function openModal(id){document.getElementById(id).style.display='flex';}
        function closeModal(id){document.getElementById(id).style.display='none';}

    </script>
</body>
</html>
