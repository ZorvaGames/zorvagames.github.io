<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZorvaGames - Professional Platform</title>
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://images.unsplash.com; frame-src 'self';">
    <meta name="google-site-verification" content="CZ4HB0wl83PJNnk7KpUVhwCcmTqqy8CaMxF-EO0qCQA" />

    <style>
        :root {
            --primary: #6c5ce7;
            --dark: #0f0f0f;
            --panel: #181818;
            --gold: #ffd700;   /* Owner */
            --orange: #ff9f43; /* Commander */
            --green: #2ecc71;  /* Mod */
            --dev: #00d2d3;    /* Developer */
            --red: #ff4757;    /* Critical/Kick */
            --text-sub: #a4b0be;
        }

        body {
            margin: 0;
            background-color: var(--dark);
            color: white;
            font-family: 'Segoe UI', system-ui, sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- SIDEBAR NAV --- */
        .sidebar {
            width: 280px;
            background-color: var(--panel);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #222;
        }

        .logo { 
            font-size: 26px; 
            font-weight: 900; 
            padding: 20px; 
            color: white; 
            cursor: pointer; 
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #222;
        }
        .logo span { color: var(--primary); }

        .nav-links { padding: 10px 0; overflow-y: auto; flex-shrink: 0; }
        .menu-item { padding: 12px 25px; color: var(--text-sub); cursor: pointer; font-weight: 600; transition:0.2s; display: flex; align-items: center; gap: 10px; }
        .menu-item:hover, .menu-item.active { background: #222; color: white; border-left: 4px solid var(--primary); padding-left: 21px; }

        /* --- ADVANCED CHAT SYSTEM --- */
        .chat-container {
            margin-top: auto;
            border-top: 1px solid #333;
            background: #111;
            display: flex;
            flex-direction: column;
            height: 35%;
        }
        .chat-tabs { display: flex; background: #000; border-bottom: 1px solid #333; }
        .tab { flex: 1; padding: 10px; text-align: center; cursor: pointer; font-size: 11px; font-weight: bold; color: #555; text-transform: uppercase; }
        .tab.active { color: white; border-bottom: 2px solid var(--primary); background: #222; }
        .tab.staff-only { color: var(--gold); display: none; } 

        .chat-box { flex: 1; padding: 15px; overflow-y: auto; font-size: 12px; display: none; scroll-behavior: smooth; }
        .chat-box.active { display: block; }
        
        .msg { margin-bottom: 8px; line-height: 1.4; border-bottom: 1px solid #222; padding-bottom: 4px; word-wrap: break-word; }
        .msg-sys { color: #555; font-style: italic; }

        /* --- MAIN CONTENT AREA --- */
        .main-content { flex: 1; display: flex; flex-direction: column; overflow-y: auto; position: relative; }

        .top-nav {
            height: 70px; background: var(--panel); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; border-bottom: 1px solid #222;
        }
        .search-bar { background: #000; border: 1px solid #333; padding: 10px 20px; border-radius: 30px; color: white; width: 300px; outline: none; transition: 0.3s; }
        .search-bar:focus { border-color: var(--primary); }

        /* BUTTON TOOLKIT */
        .btn-group { display: flex; align-items: center; gap: 12px; }
        .btn { padding: 8px 18px; border-radius: 6px; cursor: pointer; font-weight: 700; border: none; font-size:12px; transition:0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }
        
        .btn-primary { background-color: var(--primary); color: white; }
        .btn-logout { background-color: var(--red); color: white; display: none; }
        .btn-staff { background-color: var(--gold); color: black; display: none; }
        .btn-dev { background-color: var(--dev); color: black; display: none; }
        .btn-kick { background-color: var(--red); color: white; padding: 3px 8px; font-size: 10px; margin-left: auto; display: none; border-radius: 4px; }

        /* --- VIEWS --- */
        .view-section { display: none; padding: 30px; animation: fadeIn 0.3s; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* PORTAL VIEW */
        .game-frame { 
            width: 100%; height: 450px; background: black; border-radius: 15px; 
            margin-bottom: 30px; border: 1px solid #333; position: relative; 
            display: flex; align-items: center; justify-content: center;
            background-image: radial-gradient(circle, #222 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .grid-title { font-size: 22px; font-weight: bold; margin-bottom: 20px; border-left: 4px solid var(--primary); padding-left: 15px; }
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .game-card { background: var(--panel); border-radius: 12px; overflow: hidden; cursor: pointer; transition: 0.3s; border: 1px solid transparent; }
        .game-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 5px 15px rgba(108, 92, 231, 0.2); }
        .card-img { height: 120px; background: #252525; display: flex; align-items: center; justify-content: center; font-size: 40px; }

        /* ADMIN DASHBOARD VIEW */
        .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        .panel { background: #1a1a1a; padding: 25px; border-radius: 12px; border: 1px solid #333; }
        .lvl1-only { border: 1px solid var(--gold); display: none; } /* Hidden by default */

        /* INBOX STYLES */
        .req-item { background: #000; padding: 10px; margin-bottom: 8px; border-left: 3px solid var(--red); border-radius: 4px; font-size: 13px; }
        .req-actions { display: flex; gap: 5px; margin-top: 5px; }

        /* STAFF LIST STYLES */
        .staff-row { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #222; font-size: 13px; }
        .staff-badge { padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold; margin-right: 8px; color: black; }

        /* MODALS */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); justify-content: center; align-items: center; z-index: 2000; backdrop-filter: blur(5px); }
        .modal-box { background: var(--panel); padding: 35px; border-radius: 15px; width: 380px; text-align: center; border: 1px solid #444; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .inp { width: 90%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid #444; color: white; border-radius: 8px; outline: none; }
        .inp:focus { border-color: var(--primary); }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo" onclick="switchView('portal')">ZORVA<span>GAMES</span></div>
        
        <div class="nav-links">
            <div class="menu-item active" onclick="switchView('portal')">üè† Home</div>
            <div class="menu-item">üî• New</div>
            <div class="menu-item">üèÜ Trending</div>
            <div class="menu-item">‚öîÔ∏è Action</div>
        </div>

        <div class="chat-container">
            <div class="chat-tabs">
                <div class="tab active" onclick="switchChat('global')">Global üì¢</div>
                <div class="tab staff-only" id="staffTab" onclick="switchChat('staff')">Staff üîí</div>
            </div>

            <div class="chat-box active" id="globalChat">
                <div class="msg"><span class="msg-sys">System:</span> Welcome to ZorvaGames.</div>
                <div class="msg" id="adminBroadcast"><span style="color:var(--gold); font-weight:bold;">ADMIN:</span> Recruitment is OPEN!</div>
            </div>

            <div class="chat-box" id="staffChat">
                <div class="msg"><span class="msg-sys">Encrypted Channel Established.</span></div>
            </div>

            <div id="chatInputArea" style="padding:10px; background:#000; display:none;">
                <input type="text" id="chatInput" placeholder="Broadcast message..." style="width:90%; background:#111; border:none; color:white; padding:5px; font-size:11px;" onkeypress="sendChat(event)">
            </div>
        </div>
    </div>

    <div class="main-content">
        
        <div class="top-nav">
            <input type="text" class="search-bar" placeholder="Search games...">
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="openModal('recruitModal')">Apply</button>
                <button class="btn btn-dev" id="uploadBtn" onclick="openModal('uploadModal')">‚¨Ü Upload</button>
                <button class="btn btn-staff" id="staffBtn" onclick="switchView('admin')">‚öôÔ∏è Gov Panel</button>
                
                <span id="userDisplay" style="display:none; font-weight:bold; margin-left:10px;">Guest</span>
                <button class="btn btn-primary" id="loginBtn" onclick="openModal('loginModal')">Login</button>
                <button class="btn btn-logout" id="logoutBtn" onclick="logout()">Logout</button>
            </div>
        </div>

        <div class="view-section active" id="portalView">
            <div class="game-frame">
                <div style="text-align:center;">
                    <h1 style="color:white; margin:0; font-size:40px; text-shadow:0 0 20px var(--primary);">TANK DUEL</h1>
                    <p style="color:#888;">Multiplayer ‚Ä¢ Free ‚Ä¢ No Download</p>
                    <button class="btn btn-primary" style="margin-top:10px; font-size:16px;">PLAY NOW</button>
                </div>
            </div>

            <div class="grid-title">Recommended For You</div>
            <div class="game-grid">
                <div class="game-card"><div class="card-img">üèéÔ∏è</div><div style="padding:15px;"><b>Cyber Racer</b><br><span style="font-size:11px; color:#666;">Driving</span></div></div>
                <div class="game-card"><div class="card-img">üßü</div><div style="padding:15px;"><b>Zombie Defense</b><br><span style="font-size:11px; color:#666;">Action</span></div></div>
                <div class="game-card"><div class="card-img">üöÄ</div><div style="padding:15px;"><b>Space Wars</b><br><span style="font-size:11px; color:#666;">Shooting</span></div></div>
                <div class="game-card"><div class="card-img">‚öΩ</div><div style="padding:15px;"><b>Super Kicks</b><br><span style="font-size:11px; color:#666;">Sports</span></div></div>
            </div>
        </div>

        <div class="view-section" id="adminView">
            <h1 style="color: var(--gold); border-bottom:1px solid #333; padding-bottom:15px;">üèõÔ∏è Government Console</h1>
            
            <div class="dash-grid">
                <div class="panel lvl1-only" id="inboxPanel">
                    <h3 style="color:var(--gold); margin-top:0;">üì® Owner Inbox (Kick Requests)</h3>
                    <div id="requestList" style="color:#666; font-style:italic;">No pending requests.</div>
                </div>

                <div class="panel lvl1-only" id="codePanel">
                    <h3 style="color:var(--gold); margin-top:0;">üîë Nuclear Codes</h3>
                    <p style="font-size:12px; color:#888;">Generate one-time kick authorization.</p>
                    <button class="btn" style="background:var(--gold); color:black;" onclick="genCode()">GENERATE</button>
                    <span id="codeDisplay" style="font-family:monospace; font-size:18px; color:white; margin-left:10px;"></span>
                </div>

                <div class="panel" style="grid-column: span 2;">
                    <h3>Active Personnel</h3>
                    <div id="staffList">
                        <div class="staff-row">
                            <div><span class="staff-badge" style="background:var(--gold);">OWNER</span> You (Level 1)</div>
                        </div>
                        <div class="staff-row">
                            <div><span class="staff-badge" style="background:var(--orange);">CMDR</span> Commander (Level 2)</div>
                            <button class="btn-kick" onclick="tryKick('admin', 'Commander')">KICK</button>
                        </div>
                        <div class="staff-row">
                            <div><span class="staff-badge" style="background:var(--green);">MOD</span> Moderator (Level 3)</div>
                            <button class="btn-kick" onclick="tryKick('admin', 'Moderator')">KICK</button>
                        </div>
                        <div class="staff-row">
                            <div><span class="staff-badge" style="background:#555; color:white;">USER</span> BadPlayer123</div>
                            <button class="btn-kick" onclick="tryKick('user', 'BadPlayer123')">KICK</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-box">
            <h2 style="color:white;">System Login</h2>
            <p style="color:#777; font-size:11px; margin-bottom:20px;">owner/zorva | commander/1234 | mod/1234 | dev/1234</p>
            <input type="text" id="uName" class="inp" placeholder="Username">
            <input type="password" id="pWord" class="inp" placeholder="Password">
            <div style="margin-top:20px;">
                <button class="btn btn-primary" onclick="login()">ACCESS</button>
                <button class="btn" onclick="closeModal('loginModal')" style="background:transparent; color:#777;">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal" id="recruitModal">
        <div class="modal-box">
            <h2 style="color:var(--primary);">Staff Application</h2>
            <input type="text" class="inp" placeholder="Why do you want to join?">
            <div style="margin-top:20px;">
                <button class="btn btn-primary" onclick="alert('Application Sent!'); closeModal('recruitModal')">SUBMIT</button>
                <button class="btn" onclick="closeModal('recruitModal')" style="background:transparent; color:#777;">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal" id="uploadModal">
        <div class="modal-box">
            <h2 style="color:var(--dev);">Developer Upload</h2>
            <input type="file" class="inp">
            <button class="btn" style="background:var(--dev); color:black;" onclick="alert('Uploaded!'); closeModal('uploadModal')">SUBMIT</button>
            <button class="btn" onclick="closeModal('uploadModal')" style="background:transparent; color:#777;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="kickChoiceModal">
        <div class="modal-box">
            <h2 style="color:var(--red);">‚ö†Ô∏è Kicking Admin</h2>
            <p>Authorization is required for this action.</p>
            <div style="display:flex; gap:10px; justify-content:center; margin-top:20px;">
                <button class="btn btn-primary" onclick="openModal('codeModal'); closeModal('kickChoiceModal')">Use Code</button>
                <button class="btn" style="background:var(--orange); color:black;" onclick="openModal('permModal'); closeModal('kickChoiceModal')">Ask Permission</button>
            </div>
            <button class="btn" onclick="closeModal('kickChoiceModal')" style="background:transparent; color:#777; margin-top:10px;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="codeModal">
        <div class="modal-box">
            <h3>Enter Authorization Code</h3>
            <input type="text" id="kickCodeInput" class="inp" placeholder="XXXX-XXXX">
            <button class="btn btn-primary" onclick="runCodeKick()">CONFIRM</button>
            <button class="btn" onclick="closeModal('codeModal')" style="background:transparent; color:#777;">Cancel</button>
        </div>
    </div>

    <div class="modal" id="permModal">
        <div class="modal-box">
            <h3>Request Permission</h3>
            <input type="text" id="kickReason" class="inp" placeholder="Reason for kicking...">
            <button class="btn" style="background:var(--orange); color:black;" onclick="runPermReq()">SEND REQUEST</button>
            <button class="btn" onclick="closeModal('permModal')" style="background:transparent; color:#777;">Cancel</button>
        </div>
    </div>


    <script>
        // --- GLOBAL STATE ---
        let session = { user: 'Guest', role: 'guest' }; // owner, commander, mod, dev, user
        let activeTarget = '';
        let validCode = '';
        let kickRequests = [];

        // --- 1. STARTUP & SESSION ---
        window.onload = function() {
            // Restore session from LocalStorage
            const savedUser = localStorage.getItem('zorvaUser');
            const savedRole = localStorage.getItem('zorvaRole');
            if(savedUser && savedRole) {
                session.user = savedUser;
                session.role = savedRole;
                updateUI();
            }
        };

        function login() {
            const u = document.getElementById('uName').value;
            const p = document.getElementById('pWord').value;

            // Credentials Check
            if (u === 'owner' && p === 'zorva') session.role = 'owner';
            else if (u === 'commander' && p === '1234') session.role = 'commander';
            else if (u === 'mod' && p === '1234') session.role = 'mod';
            else if (u === 'dev' && p === '1234') session.role = 'dev';
            else session.role = 'user';

            session.user = u;
            // Save to browser memory
            localStorage.setItem('zorvaUser', session.user);
            localStorage.setItem('zorvaRole', session.role);
            
            updateUI();
            closeModal('loginModal');
        }

        function logout() {
            localStorage.clear();
            location.reload();
        }

        // --- 2. UI MANAGER ---
        function updateUI() {
            // Hide Login, Show User Info
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'block';
            const disp = document.getElementById('userDisplay');
            disp.style.display = 'inline-block';
            
            // Reset Admin Elements
            document.getElementById('staffBtn').style.display = 'none';
            document.getElementById('uploadBtn').style.display = 'none';
            document.getElementById('staffTab').style.display = 'none';
            document.getElementById('chatInputArea').style.display = 'none';
            document.querySelectorAll('.lvl1-only').forEach(e => e.style.display = 'none');
            document.querySelectorAll('.btn-kick').forEach(e => e.style.display = 'none');

            // Apply Role-Specific UI
            let prefix = '';
            let color = 'white';

            if(session.role === 'owner') {
                prefix = 'üëë '; color = 'var(--gold)';
                enableAdminFeatures(true); 
            } else if (session.role === 'commander') {
                prefix = '‚öîÔ∏è '; color = 'var(--orange)';
                enableAdminFeatures(false);
            } else if (session.role === 'mod') {
                prefix = 'üõ°Ô∏è '; color = 'var(--green)';
                enableAdminFeatures(false);
            } else if (session.role === 'dev') {
                prefix = 'üõ†Ô∏è '; color = 'var(--dev)';
                document.getElementById('uploadBtn').style.display = 'block';
            }

            disp.innerHTML = `<span style="color:${color}">${prefix}${session.user}</span>`;
        }

        function enableAdminFeatures(isOwner) {
            document.getElementById('staffBtn').style.display = 'block';
            document.getElementById('staffTab').style.display = 'block';
            document.getElementById('chatInputArea').style.display = 'block';
            document.querySelectorAll('.btn-kick').forEach(e => e.style.display = 'block');
            if(isOwner) {
                document.querySelectorAll('.lvl1-only').forEach(e => e.style.display = 'block');
                renderInbox();
            }
        }

        // --- 3. KICK LOGIC (The Brain) ---
        function tryKick(type, name) {
            activeTarget = name;
            
            if(type === 'user') {
                if(confirm(`Kick user ${name}?`)) alert("User removed.");
            } else {
                // Kicking Staff
                if(session.role === 'owner') {
                    alert("OWNER OVERRIDE: " + name + " removed.");
                } else {
                    openModal('kickChoiceModal');
                }
            }
        }

        function genCode() {
            validCode = "ZOR-" + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('codeDisplay').innerText = validCode;
        }

        function runCodeKick() {
            const input = document.getElementById('kickCodeInput').value;
            if(input === validCode && validCode !== '') {
                alert("‚úÖ Code Valid. " + activeTarget + " kicked.");
                validCode = ''; 
                closeModal('codeModal');
            } else {
                alert("‚ùå Invalid Code");
            }
        }

        function runPermReq() {
            const reason = document.getElementById('kickReason').value;
            kickRequests.push({ from: session.user, target: activeTarget, reason: reason });
            alert("üì® Request sent to Owner.");
            closeModal('permModal');
            // In a real app, this would send to server. Here we simulate update if owner logs in later.
        }

        function renderInbox() {
            const list = document.getElementById('requestList');
            if(kickRequests.length === 0) {
                list.innerText = "No pending requests."; return;
            }
            list.innerHTML = '';
            kickRequests.forEach((req, idx) => {
                const div = document.createElement('div');
                div.className = 'req-item';
                div.innerHTML = `
                    <div style="color:var(--gold)">From: ${req.from}</div>
                    <div>Target: <b>${req.target}</b></div>
                    <div style="color:#aaa; margin-bottom:5px;">"${req.reason}"</div>
                    <div class="req-actions">
                        <button class="btn" style="padding:4px 10px; font-size:10px; background:var(--green); color:black;" onclick="alert('Approved'); kickRequests.splice(${idx},1); renderInbox();">‚úî</button>
                        <button class="btn" style="padding:4px 10px; font-size:10px; background:var(--red); color:white;" onclick="kickRequests.splice(${idx},1); renderInbox();">‚úñ</button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        // --- 4. CHAT SYSTEM ---
        let activeChat = 'global';
        function switchChat(type) {
            activeChat = type;
            document.querySelectorAll('.chat-box').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(type+'Chat').classList.add('active');
            if(type === 'global') document.querySelectorAll('.tab')[0].classList.add('active');
            else document.getElementById('staffTab').classList.add('active');
        }

        function sendChat(e) {
            if(e.key === 'Enter') {
                const txt = document.getElementById('chatInput').value;
                if(!txt) return;
                
                const box = document.getElementById(activeChat+'Chat');
                const msg = document.createElement('div');
                msg.className = 'msg';
                
                let color = 'white';
                if(session.role === 'owner') color = 'var(--gold)';
                if(session.role === 'commander') color = 'var(--orange)';
                if(session.role === 'mod') color = 'var(--green)';

                msg.innerHTML = `<span style="color:${color}; font-weight:bold;">${session.user}:</span> ${txt}`;
                box.appendChild(msg);
                document.getElementById('chatInput').value = '';
                
                // If writing in Global, also auto-scroll
                box.scrollTop = box.scrollHeight;
            }
        }

        // --- 5. HELPERS ---
        function switchView(view) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
            
            if(view === 'portal') {
                document.getElementById('portalView').classList.add('active');
                document.querySelectorAll('.menu-item')[0].classList.add('active');
            } else {
                document.getElementById('adminView').classList.add('active');
            }
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    </script>
</body>
</html>
