<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZorvaGames - Government System</title>
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://images.unsplash.com; frame-src 'self';">
    <meta name="google-site-verification" content="CZ4HB0wl83PJNnk7KpUVhwCcmTqqy8CaMxF-EO0qCQA" />

    <style>
        :root {
            --primary: #6c5ce7;
            --dark: #121212;
            --panel: #1e1e1e;
            --gold: #ffd700;   /* Level 1 Owner */
            --orange: #ff9f43; /* Level 2 Commander */
            --green: #2ecc71;  /* Level 3 Mod */
            --red: #ff4757;    /* Alerts/Kick */
        }

        body {
            margin: 0;
            background-color: var(--dark);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- SIDEBAR & CHATS --- */
        .sidebar {
            width: 300px;
            background-color: var(--panel);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #333;
        }

        /* Chat Tabs */
        .chat-tabs {
            display: flex;
            background: #000;
        }
        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            color: #666;
            border-bottom: 2px solid transparent;
        }
        .tab.active { color: white; border-bottom: 2px solid var(--primary); }
        .tab.staff-only { color: var(--gold); }

        /* Chat Windows */
        .chat-window {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: none; /* Hidden until tab clicked */
        }
        .chat-window.active { display: block; }

        .chat-msg { font-size: 13px; margin-bottom: 8px; line-height: 1.4; }
        .msg-sys { color: #888; font-style: italic; }
        .msg-staff { color: var(--gold); }

        /* Admin Input Area */
        .admin-input-box {
            padding: 10px;
            border-top: 1px solid #333;
            display: none; /* Hidden for normal users */
        }

        /* --- MAIN AREA --- */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .top-nav {
            height: 60px;
            background-color: var(--panel);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            border-bottom: 1px solid #333;
        }

        /* DASHBOARD PANELS */
        .dashboard-grid {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .panel-box {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #444;
        }
        .lvl1-box { border-color: var(--gold); display: none; } /* Only Owner sees this */

        .request-item {
            background: #111;
            padding: 10px;
            margin-bottom: 10px;
            border-left: 3px solid var(--red);
            font-size: 13px;
        }
        
        /* STAFF LIST */
        .staff-row {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #333;
            align-items: center;
        }
        .kick-btn {
            background: var(--red);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            display: none; /* Hidden by default */
        }

        /* MODALS (Popups) */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            justify-content: center;
            align-items: center;
            z-index: 200;
        }
        .modal-content {
            background: var(--panel);
            padding: 30px;
            border-radius: 10px;
            width: 400px;
            text-align: center;
            border: 1px solid #555;
        }
        .modal-input {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
            background: #000;
            border: 1px solid #444;
            color: white;
            border-radius: 5px;
        }
        
        .dual-btn-container { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        .btn { padding: 10px 20px; border-radius: 5px; border: none; cursor: pointer; font-weight: bold; }
        .btn-code { background: var(--primary); color: white; }
        .btn-perm { background: var(--orange); color: black; }

    </style>
</head>
<body>

    <div class="sidebar">
        <div style="padding: 20px; font-weight:900; font-size:20px; border-bottom:1px solid #333;">
            ZORVA<span style="color:var(--primary)">GAMES</span>
        </div>

        <div class="chat-tabs">
            <div class="tab active" onclick="switchChat('global')">Global üì¢</div>
            <div class="tab staff-only" id="staffTab" style="display:none;" onclick="switchChat('staff')">Staff üîí</div>
        </div>

        <div class="chat-window active" id="globalChat">
            <div class="chat-msg"><span class="msg-sys">System:</span> Welcome to ZorvaGames.</div>
            <div class="chat-msg"><span class="msg-staff">Admin:</span> Recruitment is OPEN! Click "Apply".</div>
        </div>

        <div class="chat-window" id="staffChat">
            <div class="chat-msg"><span class="msg-sys">System:</span> Secure Line. Encrypted.</div>
        </div>

        <div class="admin-input-box" id="chatInputArea">
            <input type="text" class="modal-input" id="chatMsg" placeholder="Broadcast message..." onkeypress="sendChat(event)">
        </div>
    </div>

    <div class="main-content">
        <div class="top-nav">
            <b>Government Console</b>
            <div>
                <button class="btn" style="background:var(--primary); color:white;" id="applyBtn" onclick="openModal('recruitModal')">Apply for Staff</button>
                
                <button class="btn" style="background:#333; color:white;" id="loginBtn" onclick="openModal('loginModal')">Staff Login</button>
                
                <span id="userDisplay" style="display:none; font-weight:bold; color:var(--gold);">Owner</span>
            </div>
        </div>

        <div class="dashboard-grid">
            
            <div class="panel-box lvl1-box" id="inboxPanel">
                <h3 style="color:var(--gold); margin-top:0;">üì® Owner Inbox</h3>
                <div id="requestList">
                    <div style="color:#666; font-style:italic;">No pending requests.</div>
                </div>
            </div>

            <div class="panel-box lvl1-box" id="codePanel">
                <h3 style="color:var(--gold); margin-top:0;">üîë Nuclear Code Generator</h3>
                <p style="font-size:12px;">Generate a one-time code for Level 2/3 to kick admins.</p>
                <button class="btn" style="background:var(--gold); color:black;" onclick="genCode()">Generate Code</button>
                <h2 id="codeDisplay" style="font-family:monospace; color:var(--gold); letter-spacing:3px;"></h2>
            </div>

            <div class="panel-box" style="grid-column: span 2;">
                <h3>Active Personnel</h3>
                <div id="userList">
                    <div class="staff-row">
                        <span><b style="color:var(--gold)">üëë OWNER</b> (You)</span>
                    </div>
                    <div class="staff-row">
                        <span><b style="color:var(--orange)">‚öîÔ∏è Commander</b> (Level 2)</span>
                        <button class="kick-btn" onclick="initiateKick('admin', 'Commander')">KICK</button>
                    </div>
                    <div class="staff-row">
                        <span><b style="color:var(--green)">üõ°Ô∏è Moderator</b> (Level 3)</span>
                        <button class="kick-btn" onclick="initiateKick('admin', 'Moderator')">KICK</button>
                    </div>
                    <div class="staff-row">
                        <span>üë§ <span style="color:#aaa">BadUser123</span></span>
                        <button class="kick-btn" onclick="initiateKick('user', 'BadUser123')">KICK</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2>Staff Login</h2>
            <p style="font-size:12px; color:#aaa;">owner/zorva | commander/1234 | mod/1234</p>
            <input type="text" id="uName" class="modal-input" placeholder="User">
            <input type="password" id="pWord" class="modal-input" placeholder="Pass">
            <button class="btn" style="background:white; color:black;" onclick="login()">Login</button>
            <button class="btn" style="background:none; color:#888;" onclick="closeModal('loginModal')">Close</button>
        </div>
    </div>

    <div class="modal" id="kickMethodModal">
        <div class="modal-content">
            <h2 style="color:var(--red);">‚ö†Ô∏è KICKING AN ADMIN</h2>
            <p>You are targeting a fellow Admin. Authorization required.</p>
            <div class="dual-btn-container">
                <button class="btn btn-code" onclick="openModal('codeKickModal'); closeModal('kickMethodModal')">I Have a Code</button>
                <button class="btn btn-perm" onclick="openModal('permKickModal'); closeModal('kickMethodModal')">Ask Permission</button>
            </div>
            <br>
            <button class="btn" style="background:none; color:#888;" onclick="closeModal('kickMethodModal')">Cancel</button>
        </div>
    </div>

    <div class="modal" id="codeKickModal">
        <div class="modal-content">
            <h3>Enter Authorization Code</h3>
            <input type="text" id="kickCodeInput" class="modal-input" placeholder="XXXX-XXXX">
            <button class="btn btn-code" onclick="processCodeKick()">FIRE!</button>
            <button class="btn" style="background:none; color:#888;" onclick="closeModal('codeKickModal')">Cancel</button>
        </div>
    </div>

    <div class="modal" id="permKickModal">
        <div class="modal-content">
            <h3>Request Permission</h3>
            <p>The Owner will receive this request.</p>
            <input type="text" id="kickReason" class="modal-input" placeholder="Reason (e.g. Abuse of power)">
            <button class="btn btn-perm" onclick="sendPermissionRequest()">Send Request</button>
            <button class="btn" style="background:none; color:#888;" onclick="closeModal('permKickModal')">Cancel</button>
        </div>
    </div>

    <div class="modal" id="recruitModal">
        <div class="modal-content">
            <h3>Apply for Staff</h3>
            <input type="text" class="modal-input" placeholder="Your Username">
            <input type="text" class="modal-input" placeholder="Why should we hire you?">
            <button class="btn" style="background:var(--primary); color:white;" onclick="alert('Application Sent to Admin!'); closeModal('recruitModal')">Submit Application</button>
            <button class="btn" style="background:none; color:#888;" onclick="closeModal('recruitModal')">Close</button>
        </div>
    </div>

    <script>
        // --- SYSTEM VARIABLES ---
        let myLevel = 0; // 1=Owner, 2=Commander, 3=Mod
        let activeTarget = "";
        let generatedCode = "";
        let requests = []; // Stores pending kick requests for the Owner

        // --- 1. LOGIN & UI LOGIC ---
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        function login() {
            const u = document.getElementById('uName').value;
            const p = document.getElementById('pWord').value;

            if (u === 'owner' && p === 'zorva') setLevel(1);
            else if (u === 'commander' && p === '1234') setLevel(2);
            else if (u === 'mod' && p === '1234') setLevel(3);
            else alert("Invalid Credentials");

            closeModal('loginModal');
        }

        function setLevel(lvl) {
            myLevel = lvl;
            // Update UI for logged in staff
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('applyBtn').style.display = 'none';
            document.getElementById('userDisplay').style.display = 'block';
            document.getElementById('staffTab').style.display = 'block'; // Show private chat tab
            document.getElementById('chatInputArea').style.display = 'block'; // Allow typing in chat

            // Show Kick Buttons (Staff can see them)
            document.querySelectorAll('.kick-btn').forEach(b => b.style.display = 'block');

            // Apply Specific Level Powers
            if (lvl === 1) {
                document.getElementById('userDisplay').innerText = "üëë OWNER";
                document.querySelectorAll('.lvl1-box').forEach(b => b.style.display = 'block'); // Show Owner Panels
                renderRequests(); // Refresh Inbox
            } else if (lvl === 2) {
                document.getElementById('userDisplay').innerText = "‚öîÔ∏è COMMANDER";
                document.getElementById('userDisplay').style.color = "var(--orange)";
            } else {
                document.getElementById('userDisplay').innerText = "üõ°Ô∏è MOD";
                document.getElementById('userDisplay').style.color = "var(--green)";
            }
        }

        // --- 2. KICK FLOW LOGIC ---
        function initiateKick(type, name) {
            activeTarget = name;

            // Kicking a User? (Easy, no code needed)
            if (type === 'user') {
                if(confirm("Kick user " + name + "?")) alert(name + " kicked!");
                return;
            }

            // Kicking an ADMIN? (Strict Rules)
            if (myLevel === 1) {
                // Owner kicks instantly
                alert("OWNER POWER: " + name + " has been removed.");
            } else {
                // Levels 2 & 3 need authorization (Code or Permission)
                openModal('kickMethodModal');
            }
        }

        // OPTION A: Code Kick (Instant)
        function genCode() {
            generatedCode = "ZOR-" + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('codeDisplay').innerText = generatedCode;
        }

        function processCodeKick() {
            const input = document.getElementById('kickCodeInput').value;
            if (input === generatedCode && generatedCode !== "") {
                alert("‚úÖ CODE VALID. " + activeTarget + " has been kicked.");
                generatedCode = ""; // Burn code after use
                closeModal('codeKickModal');
            } else {
                alert("‚ùå INVALID CODE");
            }
        }

        // OPTION B: Permission Request (Wait for Owner)
        function sendPermissionRequest() {
            const reason = document.getElementById('kickReason').value;
            // Add to Owner's Inbox
            requests.push({ target: activeTarget, reason: reason, from: (myLevel === 2 ? "Commander" : "Mod") });
            alert("üì® Request sent to Owner Inbox. Wait for approval.");
            closeModal('permKickModal');
            renderRequests(); // Update simulation instantly
        }

        // --- 3. OWNER INBOX LOGIC ---
        function renderRequests() {
            const list = document.getElementById('requestList');
            // Only render if Owner is logged in
            if (myLevel !== 1) return;

            if (requests.length === 0) {
                list.innerHTML = '<div style="color:#666;">No pending requests.</div>';
                return;
            }
            
            list.innerHTML = ""; // Clear list
            requests.forEach((req, index) => {
                const item = document.createElement('div');
                item.className = 'request-item';
                item.innerHTML = `
                    <div style="color:var(--gold)">Request from: ${req.from}</div>
                    <div>Target: <b>${req.target}</b></div>
                    <div>Reason: "${req.reason}"</div>
                    <div style="margin-top:5px;">
                        <button class="btn" style="padding:4px 8px; font-size:10px; background:var(--green); color:black;" onclick="approveReq(${index})">APPROVE</button>
                        <button class="btn" style="padding:4px 8px; font-size:10px; background:var(--red); color:white;" onclick="denyReq(${index})">DENY</button>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function approveReq(index) {
            alert("‚úÖ APPROVED. " + requests[index].target + " has been kicked.");
            requests.splice(index, 1); // Remove from list
            renderRequests();
        }

        function denyReq(index) {
            alert("üö´ DENIED.");
            requests.splice(index, 1); // Remove from list
            renderRequests();
        }

        // --- 4. CHAT LOGIC ---
        let activeChat = 'global';
        function switchChat(type) {
            activeChat = type;
            // Hide all windows, show selected
            document.querySelectorAll('.chat-window').forEach(w => w.style.display = 'none');
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            if (type === 'global') {
                document.getElementById('globalChat').style.display = 'block';
                document.querySelectorAll('.tab')[0].classList.add('active');
            } else {
                document.getElementById('staffChat').style.display = 'block';
                document.getElementById('staffTab').classList.add('active');
            }
        }

        function sendChat(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('chatMsg');
                const text = input.value;
                if(!text) return;

                const boxID = activeChat === 'global' ? 'globalChat' : 'staffChat';
                const box = document.getElementById(boxID);
                
                const msg = document.createElement('div');
                msg.className = 'chat-msg';
                
                // Color formatting based on rank
                let prefix = myLevel === 1 ? "üëë Owner" : (myLevel === 2 ? "‚öîÔ∏è Cmdr" : "üõ°Ô∏è Mod");
                let color = myLevel === 1 ? "var(--gold)" : (myLevel === 2 ? "var(--orange)" : "var(--green)");

                msg.innerHTML = `<span style="color:${color}; font-weight:bold;">${prefix}:</span> ${text}`;
                box.appendChild(msg);
                input.value = "";
            }
        }

    </script>

</body>
</html>
